# Приложение Tracker
В 2018 году Джеймс Клир написал книгу «Атомные привычки», 
которая посвящена приобретению новых полезных привычек и 
искоренению старых плохих привычек. 

В рамках проекта реализована бэкенд-часть SPA веб-приложения - 
трекер полезных привычек.

## Особенности проекта
Возможность указать привычку, время выполнения привычки,
день недели выполнения, награду за выполнения
Телеграм-бот отправляет уведомления по привычкам,
а также может предоставить план по выполнения на сегодня и завтра,
а также 10 последних публичных привычек


# Установка 
! Бэкенд часть находится в папке 'backend'
При инсталляции установите рабочий каталог ./backend
~\Projects\Tracker\backend
```commandline
cd backend
```

# Установка с помощью docker

Проект находится под системой управления и контеризации - Docker. 
Если у вас нет Docker - вы можете установить его с официального сайта: Docker

```
docker-compose build
```
```
docker-compose up
```
Проыерка запущенных контейнеров
```
docker ps
```
Для тестирования нужно перейти во внутрь контейнера.

Найдите контейнер:
```
docker ps
```
Ищите контейнер с именем у которого есть django и позьмите первые 3 символа CONTAITER ID

Войдите в контейнер:
```
docker exec -it YourCONTAINERID bash
```
После этого вы попадате во внутрь контейнера где находится ваше приложение Джанго и можете стандартно запускать тесты внутри контейнера
```
python manage.py test
```

# Установка на локальной машине

### Установить окружение 
Активировать poetry
```commandline
poetry install
```

### Подключить БД
Создать БД Postgres
Создать файл .env по примеру  .env_example
```commandline
python manage.py migrate
``` 

### Загрузка демо-данных
```commandline
python manage.py add_user
``` 
```commandline
 python manage.py loaddata ..\data_test\Habit_fixture.json
```


### Запуск серверов
```commandline
redis-server
``` 
```commandline
celery -A config worker
```
```commandline
celery -A config beat
``` 
```commandline
python manage.py telega
```
```commandline
python manage.py runserver
``` 


# Документация и спецификация
## ./swagger


## Права доступа
Каждый пользователь имеет доступ только к своим привычкам по механизму CRUD.
Пользователь может видеть список публичных привычек без возможности их как-то редактировать или удалить

## Эндпоинты
* Регистрация.
* Авторизация.
* Список привычек текущего пользователя с пагинацией.
* Список публичных привычек.
* Создание привычки.
* Редактирование привычки.
* Удаление привычки.


## Интеграция Телеграм
Для полноценной работы сервиса необходима реализация работы 
с отложенными задачами для напоминания о том,
в какое время какие привычки необходимо выполнять.

Для этого есть интеграция сервиса с мессенджером Телеграм, 
который будет заниматься рассылкой уведомлений.

Для получения уведомлений пользователю необходимо:
1. указать свой никнэйм в Телеграме в профиле
2. Открыть в телеграме чат @Tracker_Kuchuk67_bot
3. нажить кнопку или отправить команду /start

По обработке команды /start id чата будет внесено в профиль пользователя.


## Безопасность
Для проекта настроена CORS

